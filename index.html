<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Auto Layout Akun</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center p-6">

  <h1 class="text-2xl font-bold mb-4">âœ¨ Tata Otomatis Akun âœ¨</h1>

  <!-- Upload -->
  <div class="flex gap-2 mb-4">
    <input type="file" id="upload" multiple accept="image/*" 
           class="border p-2 rounded bg-white shadow" />
    <button id="loadBtn" class="px-3 py-2 bg-green-600 text-white rounded shadow">
      Load Gambar
    </button>
  </div>

  <!-- Pilih template -->
  <select id="layout" class="mb-4 border p-2 rounded bg-white shadow">
    <option value="grid-cols-1">ðŸ“’ 1 Kolom</option>
    <option value="grid-cols-2">ðŸ“’ 2 Kolom</option>
    <option value="grid-cols-3">ðŸ“’ 3 Kolom</option>
    <option value="grid-cols-4">ðŸ“’ 4 Kolom</option>
    <option value="grid-cols-5">ðŸ“’ 5 Kolom</option>
    <option value="grid-cols-6">ðŸ“’ 6 Kolom</option>
    <option value="grid-cols-7">ðŸ“’ 7 Kolom</option>
    <option value="grid-cols-8">ðŸ“’ 8 Kolom</option>
    <option value="grid-cols-9">ðŸ“’ 9 Kolom</option>
    <option value="grid-cols-10">ðŸ“’ 10 Kolom</option>
    <option value="grid-cols-11">ðŸ“’ 11 Kolom</option>
    <option value="grid-cols-12">ðŸ“’ 12 Kolom</option>
    <option value="grid-cols-2 md:grid-cols-4">ðŸ“’ Responsive 2 â†’ 4 Kolom</option>
    <option value="grid-cols-3 md:grid-cols-6">ðŸ“’ Responsive 3 â†’ 6 Kolom</option>
    <option value="grid-cols-4 md:grid-cols-8">ðŸ“’ Responsive 4 â†’ 8 Kolom</option>
  </select>

  <!-- Container hasil -->
  <div id="gallery" class="grid gap-4 w-full max-w-6xl"></div>

  <!-- Tombol export -->
  <button id="saveBtn" class="mt-6 px-4 py-2 bg-blue-600 text-white rounded shadow">
    Simpan Jadi Gambar
  </button>

  <!-- html2canvas buat export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script>
    const upload = document.getElementById("upload");
    const loadBtn = document.getElementById("loadBtn");
    const gallery = document.getElementById("gallery");
    const layout = document.getElementById("layout");
    const saveBtn = document.getElementById("saveBtn");

    // fungsi isi dummy
    function loadDummy() {
      gallery.innerHTML = "";
      gallery.className = `grid gap-4 w-full max-w-6xl ${layout.value}`;
      for (let i = 1; i <= 6; i++) {
        const img = document.createElement("img");
        img.src = `https://picsum.photos/300/200?random=${i}`;
        img.className = "w-full rounded-xl shadow-md object-cover";
        gallery.appendChild(img);
      }
    }

    // pertama kali buka â†’ isi dummy
    loadDummy();

    // ubah layout
    layout.addEventListener("change", () => {
      if (gallery.children.length === 0) {
        loadDummy();
      }
    });

    // tombol load gambar upload
    loadBtn.addEventListener("click", () => {
      if (upload.files.length === 0) {
        alert("âš ï¸ Belum pilih file, pake dummy dulu ya.");
        loadDummy();
        return;
      }
      gallery.innerHTML = "";
      gallery.className = `grid gap-4 w-full max-w-6xl ${layout.value}`;
      Array.from(upload.files).forEach(file => {
        try {
          const reader = new FileReader();
          reader.onload = e => {
            const img = document.createElement("img");
            img.src = e.target.result;
            img.className = "w-full rounded-xl shadow-md object-cover";
            gallery.appendChild(img);
          };
          reader.readAsDataURL(file);
        } catch (err) {
          console.error("âŒ Gagal baca file:", err);
          alert("Gagal baca file di HP lo.");
        }
      });
    });

    // simpan jadi gambar
    saveBtn.addEventListener("click", () => {
      if (gallery.innerHTML.trim() === "") {
        alert("âš ï¸ Belum ada gambar untuk disimpan!");
        return;
      }
      html2canvas(gallery).then(canvas => {
        const link = document.createElement("a");
        link.download = "layout-akun.png";
        link.href = canvas.toDataURL();
        link.click();
      });
    });
  </script>
</body>
</html>