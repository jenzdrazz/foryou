<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Editor Layout Akun</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center p-6">

  <h1 class="text-2xl font-bold mb-6">Editor Spek Akun</h1>

  <!-- Tombol Upload -->
  <label for="upload" class="px-6 py-2 bg-blue-600 text-white font-semibold rounded-lg shadow cursor-pointer hover:bg-blue-700 mb-4">
    üìÇ Pilih Gambar
  </label>
  <input id="upload" type="file" accept="image/*" multiple class="hidden">

  <!-- Pilihan Layout -->
  <select id="layout" class="mb-4 border px-3 py-2 rounded-lg shadow">
    <option value="1">1 Kolom</option>
    <option value="2">2 Kolom</option>
    <option value="3">3 Kolom</option>
    <option value="4">4 Kolom</option>
    <option value="5">5 Kolom</option>
    <option value="6">6 Kolom</option>
    <option value="7">7 Kolom</option>
    <option value="8">8 Kolom</option>
    <option value="9">9 Kolom</option>
    <option value="10">10 Kolom</option>
    <option value="11">11 Kolom</option>
    <option value="12">12 Kolom</option>
    <option value="13">13 Kolom</option>
    <option value="14">14 Kolom</option>
    <option value="15">15 Kolom</option>
  </select>

  <!-- Tombol Download -->
  <button id="download" class="px-6 py-2 bg-green-600 text-white font-semibold rounded-lg shadow hover:bg-green-700 mb-6">
    ‚¨áÔ∏è Download Layout
  </button>

  <!-- Area Gambar -->
  <div id="preview" class="grid gap-1 w-full max-w-6xl"></div>

  <script>
    const upload = document.getElementById('upload');
    const layout = document.getElementById('layout');
    const preview = document.getElementById('preview');
    const downloadBtn = document.getElementById('download');

    function render(files) {
      preview.innerHTML = '';
      const cols = layout.value;
      preview.className = `grid gap-1 w-full max-w-6xl grid-cols-${cols}`;
      [...files].forEach(file => {
        const reader = new FileReader();
        reader.onload = e => {
          const div = document.createElement('div');
          div.className = "bg-yellow-300 flex items-center justify-center";
          const img = document.createElement('img');
          img.src = e.target.result;
          img.className = "w-full h-full object-cover"; // kotak tajam
          div.appendChild(img);
          preview.appendChild(div);
        };
        reader.readAsDataURL(file);
      });
    }

    upload.addEventListener('change', e => render(e.target.files));
    layout.addEventListener('change', () => {
      if (upload.files.length) render(upload.files);
    });

    // Download grid sebagai PNG
    downloadBtn.addEventListener('click', () => {
      html2canvas(preview, { backgroundColor: null }).then(canvas => {
        const link = document.createElement('a');
        link.download = "layout-akun.png";
        link.href = canvas.toDataURL("image/png");
        link.click();
      });
    });
  </script>
</body>
</html>